# Project: Playable_Maze

**项目名称**：Playable_Maze (3D Web Maze Game)

**整体效果描述**：
创建一个基于 Web 的 3D 迷宫探索游戏。界面应包含一个占据全屏的 3D 渲染画布，以及悬浮在画布上方的 UI 控件。核心体验是用户可以在“第一人称视角（First-Person View）”和“上帝视角（Bird's Eye View）”之间无缝切换。迷宫应通过算法程序化生成，具有厚实的绿色墙体和深色地面。

### 1. 视觉效果细节 (Visual Details)
- **场景风格**：简约的 3D 几何风格。
- **配色方案**：
  - **墙体**：鲜艳的绿色（类似 Hex #4CAF50 或截图中的草绿色），材质应有一定的漫反射，看起来像积木或树篱。
  - **地面**：深灰色或黑色（类似 Hex #222222），与亮色墙体形成高对比度。
  - **背景**：深灰色或渐变色天空盒，保持视觉中心在迷宫上。
- **光照与阴影**：
  - 必须包含投射阴影的方向光（Directional Light），使墙体产生立体感。
  - 辅以环境光（Ambient Light）确保阴影处不完全死黑。
- **UI 风格**：
  - 半透明黑色圆角矩形背景。
  - 白色无衬线字体（Sans-serif）。
  - 按钮具有激活状态（绿色表示 Player 模式，蓝色表示 Bird's Eye 模式，红色表示重置）。

### 2. 交互功能说明 (Interaction Features)
- **模式切换**：
  - **Player (第一人称)**：点击界面右上角的 "Player" 按钮激活。
  - **Bird's Eye (上帝视角)**：点击界面右上角的 "Bird's Eye" 按钮激活。
- **输入控制 (Player 模式)**：
  - **锁定鼠标**：点击画面任意位置锁定指针，进入沉浸式控制。
  - **移动**：使用 W/A/S/D 键进行前后左右移动。
  - **跳跃**：空格键 (Space)。
  - **视角**：鼠标移动控制观看方向。
  - **解锁**：按 ESC 键退出指针锁定。
  - **碰撞检测**：玩家不能穿过墙体，必须在通道内移动。
- **输入控制 (Bird's Eye 模式)**：
  - **旋转**：鼠标左键拖拽。
  - **缩放**：鼠标滚轮滚动。
  - **平移**：鼠标右键拖拽。
- **游戏功能**：
  - **New Maze**：点击红色按钮，基于随机种子重新生成一个新的迷宫布局。

### 3. 技术实现要点 (Technical Implementation)
- **核心库**：使用 **Three.js** (通过 CDN 引入)。
- **辅助库**：必须引入 `PointerLockControls` (用于第一人称) 和 `OrbitControls` (用于上帝视角)。
- **迷宫算法**：
  - 实现一个迷宫生成算法（如深度优先搜索 DFS 或 Recursive Backtracker）。
  - 网格大小建议为 32x32 或更大（如截图中的 64x32），确保迷宫有足够的复杂度。
  - 墙体应由 `BoxGeometry` 构建，根据网格数据实例化或合并几何体以优化性能。
- **碰撞系统**：
  - 实现简单的 AABB (Axis-Aligned Bounding Box) 碰撞检测，或基于网格坐标的碰撞预判，防止相机/玩家穿墙。
- **UI 逻辑**：
  - 使用 HTML/CSS 绝对定位覆盖在 Canvas 之上。
  - 左上角显示当前状态提示（根据模式改变文本：Player 模式显示 "Click to lock...", 上帝视角显示 "Drag to Rotate..."）。
- **响应式**：窗口大小改变时，自动调整渲染器尺寸和相机宽高比。

### 4. 动画与特效 (Animation & Effects)
- **移动平滑**：第一人称移动应具有一定的加速度/减速度，而非瞬间停止。
- **视角转换**：切换模式时，相机位置瞬间切换即可，需重置控制器的状态。

### 5. 代码合并要求 (Single File Requirement)
- 所有内容必须包含在一个 `index.html` 文件中。
- CSS 样式写在 `<style>` 标签内。
- JavaScript 逻辑写在 `<script>` 标签内（如果是模块化脚本，请使用 `<script type="module">`）。
- 外部依赖（Three.js 及控件）必须使用可靠的 CDN 链接（如 `unpkg.com` 或 `cdnjs.com` 上的 ES Modules 版本）。

---
**请生成满足以上所有要求的完整 HTML 代码。**
